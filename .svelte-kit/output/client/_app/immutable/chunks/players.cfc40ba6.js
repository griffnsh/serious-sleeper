import{af as l}from"./index.78a9f0bb.js";import{N as r}from"./records.35358e58.js";const y=async(n,i=!1)=>{if(l(r)[1426])return{players:l(r),stale:!1};const p=n??fetch,s=Math.round(new Date().getTime()/1e3);let e=null,t=null;if(e=JSON.parse(localStorage.getItem("playersInfo")),t=parseInt(localStorage.getItem("expiration")),e&&e[1426]&&t&&s>t&&!i)return{players:e,stale:!0};if(!e||!t||s>t){const o=await p("/api/fetch_players_info",{compress:!0}),a=await o.json();if(!o.ok)throw new Error(a);{localStorage.setItem("playersInfo",JSON.stringify(a));const f=Math.round(new Date().getTime()/1e3)+24*3600;localStorage.setItem("expiration",f),r.update(()=>a)}return{players:a,stale:!1}}return r.update(()=>e),{players:e,stale:!1}};export{y as l};
