import{a as ce,g as fe}from"../chunks/leagueTeamManagers.c0fc25fc.js";import"../chunks/singletons.6c6633c9.js";import{w as q,r as Z,l as ue,K as C,d as ge,a as Q,b as U}from"../chunks/records.35358e58.js";import{g as me}from"../chunks/nflState.5273b638.js";import{g as de}from"../chunks/leagueRosters.51b8caa5.js";import{af as X,S as H,i as Y,s as G,y as b,z as k,A as T,g as _,d as $,B as S,a as N,e as O,c as B,b as v,v as j,f as z,h as m,Z as K,k as M,q as y,l as L,m as E,r as P,n as I,a2 as x,T as w,G as le,u as J,a0 as _e,o as pe,Y as R}from"../chunks/index.78a9f0bb.js";import"../chunks/index.svelte_svelte_type_style_lang.1b9663cd.js";import{R as oe,C as F,D as $e,H as he,B as ve}from"../chunks/index.2d56c369.js";import{L as we}from"../chunks/LinearProgress.dc184101.js";const De=async()=>{var i;if(X(C).standingsInfo)return X(C);const[o,e,s]=await q(me(),ce(),de()).catch(u=>{console.error(u)}),t=e.season,n=e.settings.playoff_week_start-1,l=e.settings.divisions&&e.settings.divisions>1,r=s.rosters;if(e.status!="in_season"&&e.status!="post_season"&&e.status!="complete"||o.week<1)return null;let f={};for(const u in r){const c=r[u];f[u]={rosterID:u,wins:c.settings.wins,losses:c.settings.losses,ties:c.settings.ties,fpts:Z(c.settings.fpts+c.settings.fpts_decimal/100),fptsAgainst:Z(c.settings.fpts_against+c.settings.fpts_against_decimal/100),streak:((i=c.metadata)==null?void 0:i.streak)||0,divisionWins:l?0:null,divisionLosses:l?0:null,divisionTies:l?0:null}}if(l){let u=0;if(o.season_type=="regular"?u=o.display_week>n?n+1:o.display_week:o.season_type=="post"&&(u=n+1),u<2)return null;const c=[];for(let d=u-1;d>0;d--)c.push(fetch(`https://api.sleeper.app/v1/league/${ue}/matchups/${d}`,{compress:!0}));const h=await q(...c),W=[];for(const d of h){const A=d.json();if(W.push(A),!d.ok)throw new Error(A)}const D=await q(...W).catch(d=>{console.error(d)}).catch(d=>{console.error(d)});for(const d of D)f=be(d,f,r)}const a={standingsInfo:f,yearData:t};return C.update(()=>a),a},be=(o,e,s)=>{const t={};for(const n of o){t[n.matchup_id]||(t[n.matchup_id]=[]);const l=n.roster_id;t[n.matchup_id].push({rosterID:l,division:s[l].settings.division,points:n.points})}for(const n in t){const l=t[n][0],r=t[n][1];if(l.division&&r.division&&l.division==r.division)if(l.points>r.points){e[l.rosterID].divisionWins++,e[r.rosterID].divisionLosses++;continue}else if(r.points>l.points){e[r.rosterID].divisionWins++,e[l.rosterID].divisionLosses++;continue}else e[l.rosterID].divisionTies++,e[r.rosterID].divisionTies++}return e};function ee(o,e,s){const t=o.slice();return t[5]=e[s],t}function ke(o){let e,s,t,n,l,r=o[1].name+"",f,a,i;return{c(){e=M("div"),s=M("img"),n=N(),l=M("div"),f=y(r),this.h()},l(u){e=L(u,"DIV",{class:!0});var c=E(e);s=L(c,"IMG",{alt:!0,class:!0,src:!0}),n=B(c),l=L(c,"DIV",{});var h=E(l);f=P(h,r),h.forEach(m),c.forEach(m),this.h()},h(){I(s,"alt","team avatar"),I(s,"class","teamAvatar clickable svelte-1t28ir6"),x(s.src,t=o[1].avatar)||I(s,"src",t),I(e,"class","clickable team svelte-1t28ir6")},m(u,c){v(u,e,c),w(e,s),w(e,n),w(e,l),w(l,f),a||(i=le(e,"click",o[4]),a=!0)},p(u,c){c&2&&!x(s.src,t=u[1].avatar)&&I(s,"src",t),c&2&&r!==(r=u[1].name+"")&&J(f,r)},d(u){u&&m(e),a=!1,i()}}}function Te(o){let e=o[2][o[5].field]+"",s;return{c(){s=y(e)},l(t){s=P(t,e)},m(t,n){v(t,s,n)},p(t,n){n&5&&e!==(e=t[2][t[5].field]+"")&&J(s,e)},d(t){t&&m(s)}}}function te(o){let e,s;return e=new F({props:{class:"center",$$slots:{default:[Te]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,n){const l={};n&261&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Se(o){let e,s,t,n;e=new F({props:{class:"",$$slots:{default:[ke]},$$scope:{ctx:o}}});let l=o[0],r=[];for(let a=0;a<l.length;a+=1)r[a]=te(ee(o,l,a));const f=a=>$(r[a],1,1,()=>{r[a]=null});return{c(){b(e.$$.fragment),s=N();for(let a=0;a<r.length;a+=1)r[a].c();t=O()},l(a){k(e.$$.fragment,a),s=B(a);for(let i=0;i<r.length;i+=1)r[i].l(a);t=O()},m(a,i){T(e,a,i),v(a,s,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,i);v(a,t,i),n=!0},p(a,i){const u={};if(i&270&&(u.$$scope={dirty:i,ctx:a}),e.$set(u),i&5){l=a[0];let c;for(c=0;c<l.length;c+=1){const h=ee(a,l,c);r[c]?(r[c].p(h,i),_(r[c],1)):(r[c]=te(h),r[c].c(),_(r[c],1),r[c].m(t.parentNode,t))}for(j(),c=l.length;c<r.length;c+=1)f(c);z()}},i(a){if(!n){_(e.$$.fragment,a);for(let i=0;i<l.length;i+=1)_(r[i]);n=!0}},o(a){$(e.$$.fragment,a),r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);n=!1},d(a){S(e,a),a&&m(s),K(r,a),a&&m(t)}}}function Ie(o){let e,s;return e=new oe({props:{class:"contrastRow",$$slots:{default:[Se]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,[n]){const l={};n&271&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Me(o,e,s){let{columnOrder:t,team:n,standing:l,leagueTeamManagers:r}=e;const f=()=>ge({leagueTeamManagers:r,rosterID:l.rosterID});return o.$$set=a=>{"columnOrder"in a&&s(0,t=a.columnOrder),"team"in a&&s(1,n=a.team),"standing"in a&&s(2,l=a.standing),"leagueTeamManagers"in a&&s(3,r=a.leagueTeamManagers)},[t,n,l,r,f]}class Le extends H{constructor(e){super(),Y(this,e,Me,Ie,G,{columnOrder:0,team:1,standing:2,leagueTeamManagers:3})}}function se(o,e,s){const t=o.slice();return t[11]=e[s],t}function ne(o,e,s){const t=o.slice();return t[14]=e[s],t}function ye(o){let e,s,t;return s=new $e({props:{"table$aria-label":"League Standings",$$slots:{default:[Re]},$$scope:{ctx:o}}}),{c(){e=M("div"),b(s.$$.fragment),this.h()},l(n){e=L(n,"DIV",{class:!0});var l=E(e);k(s.$$.fragment,l),l.forEach(m),this.h()},h(){I(e,"class","standingsTable svelte-coyrw9")},m(n,l){v(n,e,l),T(s,e,null),t=!0},p(n,l){const r={};l&131092&&(r.$$scope={dirty:l,ctx:n}),s.$set(r)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){$(s.$$.fragment,n),t=!1},d(n){n&&m(e),S(s)}}}function Pe(o){let e,s,t;return{c(){e=M("div"),s=M("p"),t=y("Preseason, No Standings Yet"),this.h()},l(n){e=L(n,"DIV",{class:!0});var l=E(e);s=L(l,"P",{});var r=E(s);t=P(r,"Preseason, No Standings Yet"),r.forEach(m),l.forEach(m),this.h()},h(){I(e,"class","loading svelte-coyrw9")},m(n,l){v(n,e,l),w(e,s),w(s,t)},p:R,i:R,o:R,d(n){n&&m(e)}}}function Ee(o){let e,s,t,n,l,r;return l=new we({props:{indeterminate:!0}}),{c(){e=M("div"),s=M("p"),t=y("Loading Standings..."),n=N(),b(l.$$.fragment),this.h()},l(f){e=L(f,"DIV",{class:!0});var a=E(e);s=L(a,"P",{});var i=E(s);t=P(i,"Loading Standings..."),i.forEach(m),n=B(a),k(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","loading svelte-coyrw9")},m(f,a){v(f,e,a),w(e,s),w(s,t),w(e,n),T(l,e,null),r=!0},p:R,i(f){r||(_(l.$$.fragment,f),r=!0)},o(f){$(l.$$.fragment,f),r=!1},d(f){f&&m(e),S(l)}}}function Oe(o){let e;return{c(){e=y("Team")},l(s){e=P(s,"Team")},m(s,t){v(s,e,t)},d(s){s&&m(e)}}}function We(o){let e=o[14].name+"",s;return{c(){s=y(e)},l(t){s=P(t,e)},m(t,n){v(t,s,n)},p:R,d(t){t&&m(s)}}}function ae(o){let e,s;return e=new F({props:{class:"center wrappable",$$slots:{default:[We]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,n){const l={};n&131072&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ae(o){let e,s,t,n;e=new F({props:{class:"center",$$slots:{default:[Oe]},$$scope:{ctx:o}}});let l=o[6],r=[];for(let a=0;a<l.length;a+=1)r[a]=ae(ne(o,l,a));const f=a=>$(r[a],1,1,()=>{r[a]=null});return{c(){b(e.$$.fragment),s=N();for(let a=0;a<r.length;a+=1)r[a].c();t=O()},l(a){k(e.$$.fragment,a),s=B(a);for(let i=0;i<r.length;i+=1)r[i].l(a);t=O()},m(a,i){T(e,a,i),v(a,s,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,i);v(a,t,i),n=!0},p(a,i){const u={};if(i&131072&&(u.$$scope={dirty:i,ctx:a}),e.$set(u),i&64){l=a[6];let c;for(c=0;c<l.length;c+=1){const h=ne(a,l,c);r[c]?(r[c].p(h,i),_(r[c],1)):(r[c]=ae(h),r[c].c(),_(r[c],1),r[c].m(t.parentNode,t))}for(j(),c=l.length;c<r.length;c+=1)f(c);z()}},i(a){if(!n){_(e.$$.fragment,a);for(let i=0;i<l.length;i+=1)_(r[i]);n=!0}},o(a){$(e.$$.fragment,a),r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);n=!1},d(a){S(e,a),a&&m(s),K(r,a),a&&m(t)}}}function Ne(o){let e,s;return e=new oe({props:{$$slots:{default:[Ae]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,n){const l={};n&131072&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function re(o){let e,s;return e=new Le({props:{columnOrder:o[6],standing:o[11],leagueTeamManagers:o[4],team:U(o[4],o[11].rosterID)}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(t,n){const l={};n&4&&(l.standing=t[11]),n&16&&(l.leagueTeamManagers=t[4]),n&20&&(l.team=U(t[4],t[11].rosterID)),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Be(o){let e,s,t=o[2],n=[];for(let r=0;r<t.length;r+=1)n[r]=re(se(o,t,r));const l=r=>$(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=O()},l(r){for(let f=0;f<n.length;f+=1)n[f].l(r);e=O()},m(r,f){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,f);v(r,e,f),s=!0},p(r,f){if(f&84){t=r[2];let a;for(a=0;a<t.length;a+=1){const i=se(r,t,a);n[a]?(n[a].p(i,f),_(n[a],1)):(n[a]=re(i),n[a].c(),_(n[a],1),n[a].m(e.parentNode,e))}for(j(),a=t.length;a<n.length;a+=1)l(a);z()}},i(r){if(!s){for(let f=0;f<t.length;f+=1)_(n[f]);s=!0}},o(r){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)$(n[f]);s=!1},d(r){K(n,r),r&&m(e)}}}function Re(o){let e,s,t,n;return e=new he({props:{$$slots:{default:[Ne]},$$scope:{ctx:o}}}),t=new ve({props:{$$slots:{default:[Be]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),s=N(),b(t.$$.fragment)},l(l){k(e.$$.fragment,l),s=B(l),k(t.$$.fragment,l)},m(l,r){T(e,l,r),v(l,s,r),T(t,l,r),n=!0},p(l,r){const f={};r&131072&&(f.$$scope={dirty:r,ctx:l}),e.$set(f);const a={};r&131092&&(a.$$scope={dirty:r,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){$(e.$$.fragment,l),$(t.$$.fragment,l),n=!1},d(l){S(e,l),l&&m(s),S(t,l)}}}function Ve(o){let e,s=(o[3]??"")+"",t,n,l,r,f,a,i,u,c,h,W;_e(o[9]);const D=[Ee,Pe,ye],d=[];function A(g,p){return g[0]?0:g[1]?1:2}return a=A(o),i=d[a]=D[a](o),{c(){e=M("h1"),t=y(s),n=N(),l=y(Q),r=y(" Standings"),f=N(),i.c(),u=O(),this.h()},l(g){e=L(g,"H1",{class:!0});var p=E(e);t=P(p,s),n=B(p),l=P(p,Q),r=P(p," Standings"),p.forEach(m),f=B(g),i.l(g),u=O(),this.h()},h(){I(e,"class","svelte-coyrw9")},m(g,p){v(g,e,p),w(e,t),w(e,n),w(e,l),w(e,r),v(g,f,p),d[a].m(g,p),v(g,u,p),c=!0,h||(W=le(window,"resize",o[9]),h=!0)},p(g,[p]){(!c||p&8)&&s!==(s=(g[3]??"")+"")&&J(t,s);let V=a;a=A(g),a===V?d[a].p(g,p):(j(),$(d[V],1,1,()=>{d[V]=null}),z(),i=d[a],i?i.p(g,p):(i=d[a]=D[a](g),i.c()),_(i,1),i.m(u.parentNode,u))},i(g){c||(_(i),c=!0)},o(g){$(i),c=!1},d(g){g&&m(e),g&&m(f),d[a].d(g),g&&m(u),h=!1,W()}}}function je(o,e,s){let{standingsData:t,leagueTeamManagersData:n}=e;const l=["fptsAgainst","divisionTies","divisionWins","fpts","ties","wins"],r=[{name:"W",field:"wins"},{name:"T",field:"ties"},{name:"L",field:"losses"},{name:"Div W",field:"divisionWins"},{name:"Div T",field:"divisionTies"},{name:"Div L",field:"divisionLosses"},{name:"FPTS",field:"fpts"},{name:"FPTS Against",field:"fptsAgainst"},{name:"Streak",field:"streak"}];let f=!0,a=!1,i,u,c;pe(async()=>{const D=await t;if(!D){s(0,f=!1),s(1,a=!0);return}const{standingsInfo:d,yearData:A}=D;s(4,c=await n),s(3,u=A);let g=Object.keys(d).map(p=>d[p]);for(const p of l)!g[0][p]&&g[0][p]!=0||(g=[...g].sort((V,ie)=>ie[p]-V[p]));s(2,i=g),s(0,f=!1)});let h;function W(){s(5,h=window.innerWidth)}return o.$$set=D=>{"standingsData"in D&&s(7,t=D.standingsData),"leagueTeamManagersData"in D&&s(8,n=D.leagueTeamManagersData)},[f,a,i,u,c,h,r,t,n,W]}class ze extends H{constructor(e){super(),Y(this,e,je,Ve,G,{standingsData:7,leagueTeamManagersData:8})}}async function Fe(){const o=De(),e=fe();return{standingsData:o,leagueTeamManagersData:e}}const xe=Object.freeze(Object.defineProperty({__proto__:null,load:Fe},Symbol.toStringTag,{value:"Module"}));function qe(o){let e,s,t;return s=new ze({props:{standingsData:o[0],leagueTeamManagersData:o[1]}}),{c(){e=M("div"),b(s.$$.fragment),this.h()},l(n){e=L(n,"DIV",{class:!0});var l=E(e);k(s.$$.fragment,l),l.forEach(m),this.h()},h(){I(e,"class","holder svelte-131ijax")},m(n,l){v(n,e,l),T(s,e,null),t=!0},p:R,i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){$(s.$$.fragment,n),t=!1},d(n){n&&m(e),S(s)}}}function Ce(o,e,s){let{data:t}=e;const{standingsData:n,leagueTeamManagersData:l}=t;return o.$$set=r=>{"data"in r&&s(2,t=r.data)},[n,l,t]}class et extends H{constructor(e){super(),Y(this,e,Ce,qe,G,{data:2})}}export{et as component,xe as universal};
